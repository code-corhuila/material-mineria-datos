<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jupyter + ML con Docker | Miner√≠a de Datos | Ingenier√≠a de Sistemas</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-color: #1e3c72;
    --secondary-color: #2a5298;
    --accent-color: #ff6b6b;
    --light-bg: #f8f9fa;
    --dark-text: #2c3e50;
    --border-color: #e0e0e0;
    --success-color: #27ae60;
    --warning-color: #f39c12;
    --code-bg: #2d2d2d;
}

body {
    font-family: 'Roboto', sans-serif;
    line-height: 1.6;
    color: var(--dark-text);
    background-color: #fff;
}

/* Header */
.main-header {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    padding: 0;
}

.top-bar {
    background-color: rgba(0, 0, 0, 0.1);
    padding: 20px 0;
    text-align: center;
}

.brand-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
}

.logo-img {
    height: 50px;
    width: auto;
    transition: transform 0.3s ease;
}

.logo-img:hover {
    transform: scale(1.05);
}

.brand-name {
    font-size: 18px;
    font-weight: 500;
    letter-spacing: 1px;
}

.main-nav {
    background-color: rgba(0, 0, 0, 0.2);
    padding: 15px 0;
    position: sticky;
    top: 0;
    z-index: 100;
}

.main-nav ul {
    list-style: none;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0;
}

.main-nav a {
    color: white;
    text-decoration: none;
    padding: 12px 20px;
    display: block;
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.3s;
    border-bottom: 3px solid transparent;
}

.main-nav a:hover,
.main-nav a.active {
    background-color: rgba(255, 255, 255, 0.1);
    border-bottom-color: var(--accent-color);
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Main Content */
.main-content {
    padding: 50px 0;
}

section {
    margin-bottom: 40px;
}

h1 {
    color: var(--primary-color);
    font-size: 2.5em;
    margin-bottom: 20px;
    text-align: center;
}

h2 {
    color: var(--secondary-color);
    font-size: 2em;
    margin-bottom: 25px;
    border-left: 5px solid var(--accent-color);
    padding-left: 15px;
}

h3 {
    color: var(--primary-color);
    font-size: 1.5em;
    margin-top: 25px;
    margin-bottom: 15px;
}

h4 {
    color: var(--secondary-color);
    font-size: 1.2em;
    margin-bottom: 10px;
}

/* Hero Section */
.hero-section {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    padding: 60px 40px;
    border-radius: 10px;
    text-align: center;
}

.hero-section h1 {
    color: white;
    margin-bottom: 20px;
}

.hero-section .lead {
    font-size: 1.2em;
    line-height: 1.8;
}

.lead {
    font-size: 1.1em;
    line-height: 1.8;
    max-width: 900px;
    margin: 0 auto 20px;
}

/* Dividers */
.divider {
    border: none;
    border-top: 2px solid var(--border-color);
    margin: 40px 0;
}

.divider-thick {
    border: none;
    border-top: 3px solid var(--accent-color);
    margin: 50px 0;
}

/* Definition Box */
.definition-box {
    background-color: #e8f4f8;
    border-left: 5px solid var(--secondary-color);
    padding: 20px;
    margin: 20px 0;
    border-radius: 5px;
    font-size: 1.05em;
}

/* Reflection Box */
.reflection-box {
    background-color: #fff3cd;
    border-left: 5px solid var(--warning-color);
    padding: 20px;
    margin: 20px 0;
    border-radius: 5px;
}

.reflection-box h4 {
    color: #856404;
    margin-bottom: 10px;
}

.reflection-box p,
.reflection-box ul {
    color: #856404;
    line-height: 1.7;
}

.reflection-box ul {
    margin-left: 20px;
}

.reflection-box li {
    margin-bottom: 8px;
}

/* Success Box */
.success-box {
    background-color: #d4edda;
    border-left: 5px solid var(--success-color);
    padding: 20px;
    margin: 20px 0;
    border-radius: 5px;
}

.success-box h4 {
    color: #155724;
    margin-bottom: 10px;
}

.success-box p {
    color: #155724;
    line-height: 1.7;
}

/* Cards */
.card {
    background: white;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s, box-shadow 0.3s;
    margin: 15px 0;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.card h3,
.card h4 {
    color: var(--secondary-color);
    margin-top: 0;
}

.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 30px 0;
}

/* Code Blocks */
pre {
    background-color: var(--code-bg);
    color: #f8f8f2;
    padding: 20px;
    border-radius: 8px;
    overflow-x: auto;
    margin: 20px 0;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 0.95em;
    line-height: 1.5;
    border-left: 4px solid var(--accent-color);
    position: relative;
}

code {
    font-family: 'Fira Code', 'Courier New', monospace;
    background-color: #f4f4f4;
    padding: 2px 6px;
    border-radius: 3px;
    color: var(--primary-color);
}

pre code {
    background-color: transparent;
    color: #f8f8f2;
    padding: 0;
}

/* Step Box */
.step-box {
    background-color: var(--light-bg);
    border-left: 5px solid var(--secondary-color);
    padding: 25px;
    margin: 20px 0;
    border-radius: 5px;
}

.step-number {
    display: inline-block;
    background-color: var(--secondary-color);
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    text-align: center;
    line-height: 35px;
    font-weight: bold;
    margin-right: 15px;
    flex-shrink: 0;
}

.step-box h3 {
    display: flex;
    align-items: center;
    margin-top: 0;
}

.step-box h3 .step-number {
    margin-top: 0;
}

/* Tables */
.table-responsive {
    overflow-x: auto;
    margin: 30px 0;
}

.styled-table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.styled-table thead tr {
    background-color: var(--secondary-color);
    color: white;
    text-align: left;
    font-weight: 500;
}

.styled-table th,
.styled-table td {
    padding: 15px;
    border-bottom: 1px solid var(--border-color);
}

.styled-table tbody tr:hover {
    background-color: var(--light-bg);
}

.styled-table tbody tr:nth-child(odd) {
    background-color: #fafafa;
}

/* Lists */
ul, ol {
    margin: 15px 0;
    margin-left: 30px;
}

li {
    margin: 8px 0;
    line-height: 1.7;
}

/* Links */
a {
    color: var(--secondary-color);
    text-decoration: none;
    transition: color 0.3s;
}

a:hover {
    color: var(--accent-color);
    text-decoration: underline;
}

/* Badge */
.badge {
    display: inline-block;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9em;
    font-weight: 600;
    margin: 5px 5px 5px 0;
}

.badge-primary {
    background-color: #e7f3ff;
    color: #004085;
}

.badge-success {
    background-color: #d4edda;
    color: #155724;
}

.badge-warning {
    background-color: #fff3cd;
    color: #856404;
}

/* Feature List */
.feature-list {
    list-style: none;
    margin: 20px 0;
}

.feature-list li {
    padding: 10px 0;
    border-bottom: 1px solid var(--border-color);
}

.feature-list li:before {
    content: "‚úì ";
    color: var(--success-color);
    font-weight: bold;
    margin-right: 10px;
}

/* Footer */
.main-footer {
    background: var(--primary-color);
    color: white;
    text-align: center;
    padding: 40px 0;
    margin-top: 50px;
}

.main-footer p {
    margin: 8px 0;
    font-size: 0.95em;
}

.main-footer ul {
    list-style: none;
    margin-top: 20px;
}

.main-footer li {
    margin: 8px 0;
}

.main-footer a {
    color: #fff9e6;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s;
}

.main-footer a:hover {
    color: var(--accent-color);
}

/* Scroll to Top Button */
#scrollTopBtn {
    display: none;
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: var(--secondary-color);
    color: white;
    border: none;
    padding: 15px 20px;
    font-size: 18px;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    z-index: 99;
    transition: background-color 0.3s;
}

#scrollTopBtn:hover {
    background-color: var(--accent-color);
}

/* Responsive */
@media (max-width: 768px) {
    h1 {
        font-size: 1.8em;
    }
    
    h2 {
        font-size: 1.5em;
    }
    
    .hero-section {
        padding: 40px 20px;
    }
    
    .main-nav ul {
        flex-direction: column;
    }
    
    .main-nav a {
        padding: 10px 15px;
        font-size: 13px;
    }
    
    .cards-grid {
        grid-template-columns: 1fr;
    }
    
    .styled-table {
        font-size: 0.9em;
    }
    
    .styled-table th,
    .styled-table td {
        padding: 10px;
    }
    
    pre {
        font-size: 0.85em;
        padding: 15px;
    }

    .brand-container {
        flex-direction: column;
        gap: 5px;
    }

    .brand-name {
        font-size: 14px;
    }
}
    </style>
</head>
<body>

    <header class="main-header">
        <div class="top-bar">
            <div class="brand-container">
                <img src="https://raw.githubusercontent.com/code-corhuila/material-mineria-datos/b3725d694125ab35294ddfe415a327bc1445d32c/01-week/01-session/LOGO%20CORHUILA%20BLANCO%20PNG%20(2).png" alt="Logo Corhuila" class="logo-img">
                <div>
                    <div class="brand-name">CORHUILA - Corporaci√≥n Universitaria de Huila</div>
                    <div style="font-size: 14px; opacity: 0.9;">Ingenier√≠a de Sistemas | Miner√≠a de Datos</div>
                </div>
            </div>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="#introduccion" class="nav-link">Introducci√≥n</a></li>
                <li><a href="#jupyter-docker" class="nav-link">Jupyter + Docker</a></li>
                <li><a href="#regresion-lineal" class="nav-link">Regresi√≥n Lineal</a></li>
                <li><a href="#metricas" class="nav-link">M√©tricas</a></li>
                <li><a href="#ejecucion" class="nav-link">Ejecuci√≥n</a></li>
                <li><a href="#resumen" class="nav-link">Resumen</a></li>
            </ul>
        </nav>
    </header>

    <main class="container main-content">

        <section id="introduccion" class="hero-section">
            <h1>üìä Jupyter Notebook + Machine Learning con Docker</h1>
            <p class="lead">Aprende a montar Jupyter Notebook en Docker, conectarte a PostgreSQL y construir modelos de predicci√≥n con regresi√≥n lineal</p>
            <p style="margin-top: 20px; font-size: 1em; opacity: 0.95;">
                Dominar√°s la exploraci√≥n interactiva de datos, entrenamiento de modelos ML y evaluaci√≥n de m√©tricas en un entorno containerizado reproducible
            </p>
        </section>

        <hr class="divider">

        <section id="jupyter-docker">
            <h2><i class="fas fa-cube"></i> Fase 1: Montar Jupyter Notebook en Docker</h2>

            <p>Jupyter Notebook es un ambiente interactivo perfecto para experimentar con datos y modelos. Containerizarlo with Docker garantiza reproducibilidad.</p>

            <div class="step-box">
                <h3><span class="step-number">1</span>Crear Dockerfile para Jupyter + ML</h3>
                <p>Crea un archivo <code>Dockerfile</code> en la ra√≠z de tu proyecto:</p>
                <pre><code>FROM python:3.11-slim

# Establecer directorio de trabajo
WORKDIR /app

# Copiar requirements.txt
COPY requirements.txt .

# Instalar dependencias Python
RUN pip install --no-cache-dir -r requirements.txt

# Copiar todo el c√≥digo del proyecto
COPY . .

# Crear directorios necesarios
RUN mkdir -p notebooks logs data

# Exponer puerto 8888 (Jupyter)
EXPOSE 8888

# Variable de entorno para Python
ENV PYTHONUNBUFFERED=1

# Healthcheck
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD python -c "import jupyter; print('healthy')" || exit 1

# Comando por defecto: ejecutar Jupyter Notebook
CMD ["jupyter", "notebook", "--ip=0.0.0.0", "--port=8888", "--no-browser", "--allow-root"]</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">2</span>Crea .dockerignore</h3>
                <p>En la ra√≠z del proyecto, crea <code>.dockerignore</code> para excluir archivos innecesarios:</p>
                <pre><code># Control de versiones
.git
.gitignore
.github

# Ambientes virtuales
venv/
env/
ENV/
.venv

# Cach√© de Python
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
*.egg-info/

# Variables de entorno locales
.env
.env.local
.streamlit/secrets.toml
.jupyter/

# IDE y editores
.vscode/
.idea/
*.swp
*.swo
*~

# Sistema operativo
.DS_Store
Thumbs.db
.DS_Store?

# Datos locales
data/
logs/

# Docker
Dockerfile
docker-compose.yml
.dockerignore

# Documentaci√≥n
README.md
docs/</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">3</span>Actualizar requirements.txt</h3>
                <p>Aseg√∫rate de incluir todas las dependencias necesarias:</p>
                <pre><code># Web framework
requests==2.31.0

# Data processing
pandas==2.1.0
numpy==1.24.3

# Database
psycopg2-binary==2.9.9
sqlalchemy==2.0.23

# Machine Learning
scikit-learn==1.3.0
statsmodels==0.14.0

# Visualization
matplotlib==3.8.0
plotly==5.17.0

# Jupyter
jupyter==1.0.0
jupyterlab==4.0.7
ipykernel==6.26.0

# Environment
python-dotenv==1.0.0</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">4</span>Crear docker-compose.yml</h3>
                <p>Orquesta Jupyter con PostgreSQL:</p>
                <pre><code>version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    container_name: postgres_ml
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: tu_contrase√±a_muy_segura
      POSTGRES_DB: weatherstack_etl
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - ml_network

  jupyter:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: jupyter_ml
    environment:
      DB_HOST: postgres
      DB_PORT: 5432
      DB_USER: postgres
      DB_PASSWORD: tu_contrase√±a_muy_segura
      DB_NAME: weatherstack_etl
    ports:
      - "8888:8888"
    volumes:
      - ./notebooks:/app/notebooks
      - ./data:/app/data
      - ./logs:/app/logs
    depends_on:
      postgres:
        condition: service_healthy
    networks:
      - ml_network

volumes:
  postgres_data:

networks:
  ml_network:
    driver: bridge</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">5</span>Iniciar los Servicios</h3>
                <p>Desde la ra√≠z de tu proyecto:</p>
                <pre><code>docker-compose build

docker-compose up -d

# Ver logs del Jupyter
docker-compose logs -f jupyter

# Deber√≠as ver algo como:
# http://127.0.0.1:8888/lab?token=abc123...</code></pre>
            </div>

            <div class="reflection-box">
                <h4>üí° Acceder a Jupyter</h4>
                <p>Una vez que ves el token en los logs, abre tu navegador en:</p>
                <pre><code>http://localhost:8888</code></pre>
                <p style="margin-top: 15px;">Jupyter te mostrar√° una interfaz web donde puedes crear notebooks y ejecutar c√≥digo interactivamente.</p>
            </div>

            <div class="success-box">
                <h4>‚úÖ Jupyter + PostgreSQL Listos</h4>
                <p>Ahora tienes un entorno completo donde Jupyter puede conectarse directamente a PostgreSQL para explorar datos y entrenar modelos.</p>
            </div>

        </section>

        <hr class="divider">

        <section id="regresion-lineal">
            <h2><i class="fas fa-chart-line"></i> Fase 2: Regresi√≥n Lineal Simple</h2>

            <p>La regresi√≥n lineal es uno de los modelos de machine learning m√°s fundamentales. Vamos a predecir la temperatura basada en la humedad.</p>

            <div class="step-box">
                <h3><span class="step-number">1</span>Crear Jupyter Notebook</h3>
                <p>En la interfaz de Jupyter, crea un nuevo notebook llamado <code>analisis_clima_regresion.ipynb</code>.</p>
            </div>

            <div class="step-box">
                <h3><span class="step-number">2</span>Celda 1: Importar Librer√≠as</h3>
                <p>Copia este c√≥digo en la primera celda:</p>
                <pre><code>import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import plotly.express as px
from sklearn.linear_model import LinearRegression
from sklearn.model_selection import train_test_split
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error
from sqlalchemy import create_engine
import os
from dotenv import load_dotenv
import warnings
warnings.filterwarnings('ignore')

# Configurar estilo de gr√°ficas
plt.style.use('seaborn-v0_8-darkgrid')
%matplotlib inline

# Cargar variables de entorno
load_dotenv()

print("‚úÖ Librer√≠as importadas correctamente")</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">3</span>Celda 2: Conectar a PostgreSQL</h3>
                <p>Crea la conexi√≥n a la base de datos:</p>
                <pre><code># Obtener credenciales del entorno
DB_HOST = os.getenv('DB_HOST', 'localhost')
DB_PORT = os.getenv('DB_PORT', '5432')
DB_USER = os.getenv('DB_USER', 'postgres')
DB_PASSWORD = os.getenv('DB_PASSWORD')
DB_NAME = os.getenv('DB_NAME', 'weatherstack_etl')

# Construir URL de conexi√≥n
DATABASE_URL = f"postgresql://{DB_USER}:{DB_PASSWORD}@{DB_HOST}:{DB_PORT}/{DB_NAME}"

# Crear engine
engine = create_engine(DATABASE_URL)

# Probar conexi√≥n
try:
    with engine.connect() as conn:
        print("‚úÖ Conexi√≥n a PostgreSQL exitosa")
except Exception as e:
    print(f"‚ùå Error de conexi√≥n: {str(e)}")</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">4</span>Celda 3: Cargar Datos</h3>
                <p>Extrae los datos de clima de PostgreSQL:</p>
                <pre><code># Consulta SQL para obtener datos
query = """
SELECT 
    r.temperatura,
    r.humedad,
    r.velocidad_viento,
    c.nombre as ciudad,
    r.fecha_registro
FROM registros_clima r
JOIN ciudades c ON r.ciudad_id = c.id
WHERE r.temperatura IS NOT NULL 
  AND r.humedad IS NOT NULL
ORDER BY r.fecha_registro DESC
"""

# Cargar en DataFrame
df = pd.read_sql(query, engine)

print(f"üìä Datos cargados: {len(df)} registros")
print(f"\n Informaci√≥n del Dataset:")
print(df.info())
print(f"\n Primeros registros:")
df.head(10)</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">5</span>Celda 4: An√°lisis Exploratorio</h3>
                <p>Visualiza la relaci√≥n entre variables:</p>
                <pre><code># Estad√≠sticas descriptivas
print("üìà Estad√≠sticas Descriptivas:")
print(df[['temperatura', 'humedad', 'velocidad_viento']].describe())

# Matriz de correlaci√≥n
print("\nüîó Matriz de Correlaci√≥n:")
correlation = df[['temperatura', 'humedad', 'velocidad_viento']].corr()
print(correlation)

# Visualizar correlaci√≥n
fig = px.imshow(
    correlation,
    labels=dict(color="Correlaci√≥n"),
    title="Matriz de Correlaci√≥n - Variables Clim√°ticas",
    color_continuous_scale='coolwarm'
)
fig.show()

# Scatter plot: Temperatura vs Humedad
fig = px.scatter(
    df, 
    x='humedad', 
    y='temperatura',
    title='Relaci√≥n: Temperatura vs Humedad',
    labels={'humedad': 'Humedad (%)', 'temperatura': 'Temperatura (¬∞C)'},
    color='velocidad_viento',
    color_continuous_scale='Viridis'
)
fig.show()</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">6</span>Celda 5: Preparar Datos para Regresi√≥n</h3>
                <p>Divide los datos en entrenamiento y prueba:</p>
                <pre><code># Variables independientes (X): humedad y velocidad del viento
X = df[['humedad', 'velocidad_viento']].values

# Variable dependiente (y): temperatura
y = df['temperatura'].values

print(f"X shape: {X.shape}")
print(f"y shape: {y.shape}")

# Dividir datos: 80% entrenamiento, 20% prueba
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)

print(f"\nüìä Divisi√≥n de datos:")
print(f"  Entrenamiento: {len(X_train)} muestras ({len(X_train)/len(X)*100:.1f}%)")
print(f"  Prueba: {len(X_test)} muestras ({len(X_test)/len(X)*100:.1f}%)")</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">7</span>Celda 6: Entrenar Modelo de Regresi√≥n Lineal</h3>
                <p>Crea y entrena el modelo:</p>
                <pre><code># Crear instancia del modelo
model = LinearRegression()

# Entrenar el modelo
model.fit(X_train, y_train)

print("‚úÖ Modelo entrenado correctamente")

# Ver coeficientes
print(f"\nüìê Coeficientes del Modelo:")
print(f"  Intercepto (Œ≤‚ÇÄ): {model.intercept_:.4f}")
print(f"  Coeficiente Humedad (Œ≤‚ÇÅ): {model.coef_[0]:.4f}")
print(f"  Coeficiente Viento (Œ≤‚ÇÇ): {model.coef_[1]:.4f}")

# Interpretar coeficientes
print(f"\nüí° Interpretaci√≥n:")
print(f"  Temperatura = {model.intercept_:.2f} + ({model.coef_[0]:.4f} √ó Humedad) + ({model.coef_[1]:.4f} √ó Viento)")
print(f"  Por cada 1% de humedad, la temp {'sube' if model.coef_[0] > 0 else 'baja'} {abs(model.coef_[0]):.4f}¬∞C")
print(f"  Por cada 1 km/h de viento, la temp {'sube' if model.coef_[1] > 0 else 'baja'} {abs(model.coef_[1]):.4f}¬∞C")</code></pre>
            </div>

        </section>

        <hr class="divider">

        <section id="metricas">
            <h2><i class="fas fa-calculator"></i> Fase 3: Evaluaci√≥n de M√©tricas</h2>

            <p>Las m√©tricas cuantifican qu√© tan bien el modelo predice. Vamos a calcular varias.</p>

            <div class="step-box">
                <h3><span class="step-number">1</span>Celda 7: Hacer Predicciones</h3>
                <p>Usa el modelo en datos de entrenamiento y prueba:</p>
                <pre><code># Predicciones en datos de entrenamiento
y_train_pred = model.predict(X_train)

# Predicciones en datos de prueba
y_test_pred = model.predict(X_test)

print("‚úÖ Predicciones realizadas")
print(f"\nPrimeras 10 predicciones vs valores reales (conjunto de prueba):")
comparison = pd.DataFrame({
    'Humedad': X_test[:10, 0],
    'Viento': X_test[:10, 1],
    'Temp Real': y_test[:10],
    'Temp Predicha': y_test_pred[:10],
    'Error': y_test[:10] - y_test_pred[:10]
})
print(comparison)</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">2</span>Celda 8: Calcular M√©tricas</h3>
                <p>Eval√∫a el desempe√±o del modelo:</p>
                <pre><code># Calcular m√©tricas en conjunto de entrenamiento
train_mse = mean_squared_error(y_train, y_train_pred)
train_rmse = np.sqrt(train_mse)
train_mae = mean_absolute_error(y_train, y_train_pred)
train_r2 = r2_score(y_train, y_train_pred)

# Calcular m√©tricas en conjunto de prueba
test_mse = mean_squared_error(y_test, y_test_pred)
test_rmse = np.sqrt(test_mse)
test_mae = mean_absolute_error(y_test, y_test_pred)
test_r2 = r2_score(y_test, y_test_pred)

print("=" * 60)
print("üìä M√âTRICAS DEL MODELO DE REGRESI√ìN LINEAL")
print("=" * 60)

print("\nüéØ CONJUNTO DE ENTRENAMIENTO:")
print(f"  MAE (Error Absoluto Medio):     {train_mae:.4f}¬∞C")
print(f"  MSE (Error Cuadr√°tico Medio):   {train_mse:.4f}")
print(f"  RMSE (Ra√≠z del Error Cuadr√°tico): {train_rmse:.4f}¬∞C")
print(f"  R¬≤ (Coef. de Determinaci√≥n):    {train_r2:.4f} ({train_r2*100:.2f}%)")

print("\nüß™ CONJUNTO DE PRUEBA:")
print(f"  MAE (Error Absoluto Medio):     {test_mae:.4f}¬∞C")
print(f"  MSE (Error Cuadr√°tico Medio):   {test_mse:.4f}")
print(f"  RMSE (Ra√≠z del Error Cuadr√°tico): {test_rmse:.4f}¬∞C")
print(f"  R¬≤ (Coef. de Determinaci√≥n):    {test_r2:.4f} ({test_r2*100:.2f}%)")

print("\n" + "=" * 60)

# Detectar overfitting
if abs(train_r2 - test_r2) > 0.1:
    print("‚ö†Ô∏è  ALERTA: Posible overfitting (diferencia en R¬≤ > 0.1)")
else:
    print("‚úÖ BUEN AJUSTE: El modelo generaliza bien")</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">3</span>Celda 9: Visualizar Resultados</h3>
                <p>Crea gr√°ficas de diagn√≥stico:</p>
                <pre><code># Crear figura con subplots
fig, axes = plt.subplots(2, 2, figsize=(14, 10))
fig.suptitle('Diagn√≥stico del Modelo de Regresi√≥n Lineal', fontsize=16, fontweight='bold')

# Gr√°fica 1: Valores Predichos vs Reales (Entrenamiento)
axes[0, 0].scatter(y_train, y_train_pred, alpha=0.6, color='#2a5298', label='Entrenamiento')
axes[0, 0].plot([y_train.min(), y_train.max()], [y_train.min(), y_train.max()], 
                'r--', lw=2, label='Predicci√≥n Perfecta')
axes[0, 0].set_xlabel('Temperatura Real (¬∞C)')
axes[0, 0].set_ylabel('Temperatura Predicha (¬∞C)')
axes[0, 0].set_title('Predicciones vs Reales (Entrenamiento)')
axes[0, 0].legend()
axes[0, 0].grid(alpha=0.3)

# Gr√°fica 2: Valores Predichos vs Reales (Prueba)
axes[0, 1].scatter(y_test, y_test_pred, alpha=0.6, color='#ff6b6b', label='Prueba')
axes[0, 1].plot([y_test.min(), y_test.max()], [y_test.min(), y_test.max()], 
                'r--', lw=2, label='Predicci√≥n Perfecta')
axes[0, 1].set_xlabel('Temperatura Real (¬∞C)')
axes[0, 1].set_ylabel('Temperatura Predicha (¬∞C)')
axes[0, 1].set_title('Predicciones vs Reales (Prueba)')
axes[0, 1].legend()
axes[0, 1].grid(alpha=0.3)

# Gr√°fica 3: Residuos (Entrenamiento)
residuals_train = y_train - y_train_pred
axes[1, 0].scatter(y_train_pred, residuals_train, alpha=0.6, color='#2a5298')
axes[1, 0].axhline(y=0, color='r', linestyle='--', lw=2)
axes[1, 0].set_xlabel('Temperatura Predicha (¬∞C)')
axes[1, 0].set_ylabel('Residuos (¬∞C)')
axes[1, 0].set_title('Residuos (Entrenamiento)')
axes[1, 0].grid(alpha=0.3)

# Gr√°fica 4: Residuos (Prueba)
residuals_test = y_test - y_test_pred
axes[1, 1].scatter(y_test_pred, residuals_test, alpha=0.6, color='#ff6b6b')
axes[1, 1].axhline(y=0, color='r', linestyle='--', lw=2)
axes[1, 1].set_xlabel('Temperatura Predicha (¬∞C)')
axes[1, 1].set_ylabel('Residuos (¬∞C)')
axes[1, 1].set_title('Residuos (Prueba)')
axes[1, 1].grid(alpha=0.3)

plt.tight_layout()
plt.savefig('diagnosticos_modelo.png', dpi=300, bbox_inches='tight')
plt.show()

print("‚úÖ Gr√°ficas guardadas como 'diagnosticos_modelo.png'")</code></pre>
            </div>

            <div class="reflection-box">
                <h4>üìñ Interpretaci√≥n de M√©tricas</h4>
                <ul>
                    <li><strong>MAE (Error Absoluto Medio):</strong> Promedio de los errores en valor absoluto. Unidad: ¬∞C. M√°s bajo = mejor.</li>
                    <li><strong>RMSE (Ra√≠z del Error Cuadr√°tico):</strong> Penaliza m√°s los errores grandes. M√°s bajo = mejor.</li>
                    <li><strong>R¬≤ (Coeficiente de Determinaci√≥n):</strong> Qu√© porcentaje de la varianza es explicada. Rango: 0-1. M√°s alto = mejor.</li>
                    <li><strong>Residuos:</strong> Diferencia entre valores reales y predichos. Idealmente distribuidos aleatoriamente alrededor de cero.</li>
                </ul>
            </div>

        </section>

        <hr class="divider">

        <section id="ejecucion">
            <h2><i class="fas fa-play-circle"></i> Fase 4: Ejecutar Todo con Docker</h2>

            <div class="step-box">
                <h3><span class="step-number">1</span>Estructura del Proyecto</h3>
                <p>Aseg√∫rate que tu estructura sea:</p>
                <pre><code>tu_proyecto/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .dockerignore
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ notebooks/
‚îÇ   ‚îî‚îÄ‚îÄ analisis_clima_regresion.ipynb    (creado en Jupyter)
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ extractor_db.py
‚îÇ   ‚îî‚îÄ‚îÄ consultas.py
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ diagnosticos_modelo.png          (salida de Jupyter)
‚îî‚îÄ‚îÄ logs/
    ‚îî‚îÄ‚îÄ etl.log</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">2</span>Iniciar Servicios</h3>
                <p>Desde la terminal en la ra√≠z del proyecto:</p>
                <pre><code>docker-compose build

docker-compose up -d

# Ver logs de Jupyter
docker-compose logs -f jupyter

# Copiar la URL con token que aparece en los logs</code></pre>
            </div>

            <div class="step-box">
                <h3><span class="step-number">3</span>Acceder a Jupyter</h3>
                <p>Abre en el navegador la URL proporcionada en los logs (ej: <code>http://localhost:8888/lab?token=abc123...</code>)</p>
            </div>

            <div class="step-box">
                <h3><span class="step-number">4</span>Ejecutar el Notebook</h3>
                <p>En Jupyter:</p>
                <ul>
                    <li>Crea un nuevo notebook</li>
                    <li>Copia las celdas de las fases anteriores</li>
                    <li>Ejecuta cada celda (Shift + Enter) o todas con Kernel ‚Üí Restart & Run All</li>
                    <li>Los gr√°ficos y m√©tricas aparecer√°n inline</li>
                </ul>
            </div>

            <div class="step-box">
                <h3><span class="step-number">5</span>Parar los Servicios</h3>
                <p>Cuando termines:</p>
                <pre><code>docker-compose down

# Si quieres eliminar vol√∫menes (cuidado: borra datos)
docker-compose down -v</code></pre>
            </div>

            <div class="success-box">
                <h4>‚úÖ Workflow Completo Ejecutado</h4>
                <p>Has completado todo el ciclo: desde cargar datos de PostgreSQL hasta entrenar un modelo ML, evaluar m√©tricas y visualizar resultados, todo dentro de Docker.</p>
            </div>

        </section>

        <hr class="divider-thick">

        <section id="resumen">
            <h2><i class="fas fa-medal"></i> Resumen: De Datos a Predicciones</h2>

            <div class="cards-grid">
                <div class="card">
                    <h3>Fase 1: Jupyter + Docker üê≥</h3>
                    <p><strong>Tiempo:</strong> 20-30 minutos</p>
                    <ul>
                        <li>Crear Dockerfile con Jupyter</li>
                        <li>Orquestar con docker-compose.yml</li>
                        <li>Conectar PostgreSQL</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Resultado:</strong> Entorno completo listo para an√°lisis ML.</p>
                </div>

                <div class="card">
                    <h3>Fase 2: Regresi√≥n Lineal üìà</h3>
                    <p><strong>Tiempo:</strong> 20-30 minutos</p>
                    <ul>
                        <li>Cargar datos de PostgreSQL</li>
                        <li>An√°lisis exploratorio</li>
                        <li>Entrenar modelo LinearRegression</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Resultado:</strong> Modelo que predice temperatura.</p>
                </div>

                <div class="card">
                    <h3>Fase 3: M√©tricas üìä</h3>
                    <p><strong>Tiempo:</strong> 15-20 minutos</p>
                    <ul>
                        <li>Calcular MAE, RMSE, MSE</li>
                        <li>Evaluar R¬≤ score</li>
                        <li>Visualizar diagn√≥sticos</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Resultado:</strong> Evaluaci√≥n completa del modelo.</p>
                </div>

                <div class="card">
                    <h3>Fase 4: Ejecuci√≥n üöÄ</h3>
                    <p><strong>Tiempo:</strong> 10-15 minutos</p>
                    <ul>
                        <li>Iniciar docker-compose</li>
                        <li>Ejecutar notebook</li>
                        <li>Guardar resultados</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Resultado:</strong> Pipeline ML end-to-end.</p>
                </div>
            </div>

            <h3>‚è±Ô∏è Tiempo Total Estimado: 65-95 minutos</h3>

            <div class="reflection-box">
                <h4>üéì Conceptos Avanzados Aprendidos</h4>
                <ul>
                    <li>Containerizaci√≥n de Jupyter Notebook con Docker</li>
                    <li>Orquestaci√≥n multi-contenedor con Docker Compose</li>
                    <li>Conexi√≥n de aplicaciones Python a PostgreSQL desde Docker</li>
                    <li>Regresi√≥n lineal: concepto, entrenamiento y predicci√≥n</li>
                    <li>Evaluaci√≥n de modelos: MAE, RMSE, R¬≤, residuos</li>
                    <li>Divisi√≥n train/test y detecci√≥n de overfitting</li>
                    <li>Exploraci√≥n interactiva con Jupyter Notebook</li>
                    <li>Scikit-learn para machine learning en Python</li>
                    <li>Visualizaci√≥n de diagn√≥sticos con Matplotlib y Plotly</li>
                </ul>
            </div>

            <div class="definition-box">
                <h4>üìö Regresi√≥n Lineal Simple vs M√∫ltiple</h4>
                <p><strong>Simple:</strong> Una variable independiente (X) predice una dependiente (y). Forma: y = Œ≤‚ÇÄ + Œ≤‚ÇÅ√óX</p>
                <p style="margin-top: 10px;"><strong>M√∫ltiple:</strong> M√∫ltiples variables independientes (X‚ÇÅ, X‚ÇÇ, ...) predicen y. Forma: y = Œ≤‚ÇÄ + Œ≤‚ÇÅ√óX‚ÇÅ + Œ≤‚ÇÇ√óX‚ÇÇ + ...</p>
                <p style="margin-top: 10px;"><strong>En nuestro caso:</strong> Usamos regresi√≥n M√öLTIPLE con Humedad y Velocidad del Viento para predecir Temperatura.</p>
            </div>

            <h3>üöÄ Pr√≥ximos Desaf√≠os</h3>

            <div class="step-box">
                <h3><span class="step-number">1</span>Probar Otros Modelos</h3>
                <p>Experimenta con: DecisionTreeRegressor, RandomForestRegressor, SupportVectorRegressor, GradientBoostingRegressor</p>
            </div>

            <div class="step-box">
                <h3><span class="step-number">2</span>Validaci√≥n Cruzada</h3>
                <p>Usa cross-validation para evaluar el modelo de manera m√°s robusta.</p>
            </div>

            <div class="step-box">
                <h3><span class="step-number">3</span>Ingenier√≠a de Features</h3>
                <p>Crea nuevas variables (interacciones, polinomios) para mejorar predicciones.</p>
            </div>

            <div class="step-box">
                <h3><span class="step-number">4</span>Serializar el Modelo</h3>
                <p>Guarda el modelo entrenado con pickle o joblib para usarlo en producci√≥n.</p>
            </div>

            <div class="step-box">
                <h3><span class="step-number">5</span>API REST para Predicciones</h3>
                <p>Crea un Flask/FastAPI endpoint que acepte nuevos datos y devuelva predicciones.</p>
            </div>

            <div class="success-box">
                <h4>‚ú® ¬°PROYECTO AVANZADO COMPLETADO!</h4>
                <p>Felicidades üéâ. Acabas de seguir el ciclo completo de Data Science:</p>
                <ol style="margin-top: 10px;">
                    <li>üìä <strong>Datos:</strong> Extra√≠dos de API ‚Üí Almacenados en PostgreSQL</li>
                    <li>üîç <strong>Exploraci√≥n:</strong> An√°lisis interactivo en Jupyter</li>
                    <li>üßÆ <strong>Modelado:</strong> Regresi√≥n Lineal entrenada</li>
                    <li>üìà <strong>Evaluaci√≥n:</strong> M√©tricas calculadas y visualizadas</li>
                    <li>üê≥ <strong>Reproducibilidad:</strong> Todo containerizado en Docker</li>
                </ol>
                <p style="margin-top: 15px;">Este es el workflow que usan Data Scientists y ML Engineers en empresas reales. ¬°Felicitaciones por llegar hasta aqu√≠! üöÄ</p>
            </div>

        </section>

    </main>

    <footer class="main-footer">
        <div class="container">
            <p><strong>Corporaci√≥n Universitaria de Huila (CORHUILA)</strong></p>
            <p>Ingenier√≠a de Sistemas | Miner√≠a de Datos 2026</p>
            <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.9;">
                Material Educativo - Uso Acad√©mico Autorizado | 
                <a href="https://www.corhuila.edu.co" target="_blank">www.corhuila.edu.co</a>
            </p>
            <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.95;">
                üìö Desarrollado por: <strong>Ing. Julian Quimbayo Castro</strong>
            </p>
            <p style="margin-top: 20px; font-size: 0.85em;">
                ¬© 2026 Todos los derechos reservados
            </p>
        </div>
    </footer>

    <button id="scrollTopBtn" title="Volver arriba">‚Üë</button>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    setupScrollButton();
    setupNavigation();
    setupSmoothScroll();
    highlightActiveSection();
});

// Scroll to Top Button
function setupScrollButton() {
    const scrollBtn = document.getElementById('scrollTopBtn');

    window.addEventListener('scroll', function() {
        if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
            scrollBtn.style.display = 'block';
        } else {
            scrollBtn.style.display = 'none';
        }
    });

    scrollBtn.addEventListener('click', function() {
        window.scrollTo({top: 0, behavior: 'smooth'});
    });
}

// Smooth Scroll
function setupSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({behavior: 'smooth'});
            }
        });
    });
}

// Active Navigation Highlight
function setupNavigation() {
    const navLinks = document.querySelectorAll('.main-nav a');
    window.addEventListener('scroll', highlightActiveSection);
}

function highlightActiveSection() {
    const navLinks = document.querySelectorAll('.main-nav a');
    let current = '';

    const sections = document.querySelectorAll('section');
    sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (pageYOffset >= sectionTop - 200) {
            current = section.getAttribute('id');
        }
    });

    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href').slice(1) === current) {
            link.classList.add('active');
        }
    });
}

// Copy Code to Clipboard
document.querySelectorAll('pre').forEach(pre => {
    const button = document.createElement('button');
    button.textContent = 'üìã Copiar';
    button.style.cssText = `
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: #2a5298;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 13px;
        opacity: 0;
        transition: opacity 0.3s;
    `;

    pre.style.position = 'relative';
    pre.appendChild(button);

    pre.addEventListener('mouseenter', () => {
        button.style.opacity = '1';
    });

    pre.addEventListener('mouseleave', () => {
        button.style.opacity = '0';
    });

    button.addEventListener('click', () => {
        const text = pre.querySelector('code').textContent;
        navigator.clipboard.writeText(text).then(() => {
            button.textContent = '‚úÖ Copiado!';
            setTimeout(() => {
                button.textContent = 'üìã Copiar';
            }, 2000);
        });
    });
});
    </script>
</body>
</html>
